{"ast":null,"code":"var _jsxFileName = \"D:\\\\Libr\\\\front\\\\src\\\\Page\\\\Home.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport TableSystem from '../Components/TableSystem';\nimport Menu from '../Components/Menu';\nimport '../css/Table.css';\nimport { useHttp } from '../hooks/http.hook';\nimport { useMessage } from '../hooks/message.hook';\n\nfunction Home() {\n  const [errors, setError] = useState(null);\n  const [items, setItems] = useState([]);\n  const [isLoaded, setIsLoaded] = useState(false);\n  const url = \"http://localhost:5000/api/systems\";\n  const message = useMessage();\n  const {\n    request,\n    error,\n    clearError\n  } = useHttp();\n  useEffect(() => {\n    message(error);\n    clearError();\n  }, [error, message, clearError]);\n  useEffect(() => {\n    fetch(\"http://127.0.0.1:5000/api/systems\").then(res => res.json()).then(result => {\n      setIsLoaded(true);\n      setItems(result);\n    }, error => {\n      setIsLoaded(true);\n      setError(error);\n    });\n  }, [isLoaded]);\n\n  const addSystem = async (request_type, formInfo) => {\n    try {\n      const data = await request(url, String(request_type), formInfo);\n      message(data.message);\n    } catch (error) {\n      console.error('Ошибка:', error);\n    }\n  };\n\n  const changeVidjetStatus = async (_id, request_type) => {\n    try {\n      const data = await request(url, String(request_type), {\n        _id\n      });\n      message(data.message);\n      setIsLoaded(false);\n    } catch (error) {\n      console.error('Ошибка:', error);\n    }\n  };\n\n  if (error) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 16\n      }\n    }, \"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \", error.message);\n  } else if (!isLoaded) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 16\n      }\n    }, \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\");\n  } else {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"system_list\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Menu, {\n      PostInfoSystem: addSystem,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table__system\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"thead\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      className: \"title__head\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"table__tetx\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 33\n      }\n    }, \" \\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0418\\u0421 \")), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"title__head\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"table__tetx\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 33\n      }\n    }, \"\\u0421\\u0435\\u0442\\u044C\")), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"title__head\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"table__tetx\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 33\n      }\n    }, \"\\u0414\\u0430\\u0442\\u0430 \\u0441\\u043E\\u0437\\u0434\\u0430\\u043D\\u0438\\u044F\")), /*#__PURE__*/React.createElement(\"th\", {\n      className: \"title__head\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"table__tetx\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 33\n      }\n    }, \"\\u0412\\u0438\\u0434\\u0436\\u0435\\u0442\\u044B\")))), /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }\n    }, items.map(obj => {\n      return /*#__PURE__*/React.createElement(TableSystem, Object.assign({\n        key: obj._id\n      }, obj, {\n        hanldeVidjet: changeVidjetStatus,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 37\n        }\n      }));\n    }))));\n  }\n}\n\nexport default Home;","map":{"version":3,"sources":["D:/Libr/front/src/Page/Home.jsx"],"names":["React","useState","useEffect","TableSystem","Menu","useHttp","useMessage","Home","errors","setError","items","setItems","isLoaded","setIsLoaded","url","message","request","error","clearError","fetch","then","res","json","result","addSystem","request_type","formInfo","data","String","console","changeVidjetStatus","_id","map","obj"],"mappings":"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","sourcesContent":["import React, { useState,useEffect } from 'react'\r\nimport TableSystem from '../Components/TableSystem'\r\nimport Menu from '../Components/Menu'\r\nimport '../css/Table.css'\r\nimport { useHttp } from '../hooks/http.hook'\r\nimport { useMessage } from '../hooks/message.hook'\r\n\r\n\r\nfunction Home() {\r\n\r\n    const [errors, setError] = useState(null);\r\n    const [items, setItems] = useState([]);\r\n    const [isLoaded, setIsLoaded] = useState(false);\r\n    const url = \"http://localhost:5000/api/systems\"\r\n\r\n    const message = useMessage()\r\n    const { request, error, clearError } = useHttp()\r\n\r\n    useEffect(() => {\r\n        message(error)\r\n        clearError()\r\n    }, [error, message, clearError])\r\n\r\n\r\n    useEffect(() => {\r\n        fetch(\"http://127.0.0.1:5000/api/systems\")\r\n            .then(res => res.json())\r\n            .then(\r\n                (result) => {\r\n                    setIsLoaded(true);\r\n                    setItems(result);\r\n                },\r\n                (error) => {\r\n                    setIsLoaded(true);\r\n                    setError(error);\r\n                }\r\n            )\r\n    },[isLoaded])\r\n\r\n\r\n    const addSystem = async (request_type, formInfo) => {\r\n        try {\r\n            const data = await request(url, String(request_type), formInfo)\r\n            message(data.message)\r\n        } catch (error) {\r\n            console.error('Ошибка:', error);\r\n        }\r\n    }\r\n\r\n\r\n    const changeVidjetStatus = async (_id, request_type) => {\r\n        try {\r\n            const data = await request(url,String(request_type),{ _id })\r\n            message(data.message)\r\n            setIsLoaded(false)\r\n        } catch (error) {\r\n            console.error('Ошибка:', error);\r\n        }\r\n    }\r\n\r\n\r\n    if (error) {\r\n        return <div>Ошибка: {error.message}</div>;\r\n    } else if (!isLoaded) {\r\n        return <div>Загрузка...</div>;\r\n    } else {\r\n        return (\r\n            <div className=\"system_list\">\r\n                <Menu PostInfoSystem={addSystem} />\r\n                < table className=\"table__system\">\r\n                    <thead>\r\n                        <tr>\r\n                            <th className=\"title__head\">\r\n                                <span className=\"table__tetx\"> Название ИС </span>\r\n                            </th>\r\n                            <th className=\"title__head\">\r\n                                <span className=\"table__tetx\">Сеть</span>\r\n                            </th>\r\n                            <th className=\"title__head\">\r\n                                <span className=\"table__tetx\">Дата создания</span>\r\n                            </th>\r\n                            <th className=\"title__head\">\r\n                                <span className=\"table__tetx\">Виджеты</span>\r\n                            </th>\r\n                        </ tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {\r\n                            items.map((obj) => {\r\n                                return (\r\n                                    <TableSystem key={obj._id} {...obj} hanldeVidjet={changeVidjetStatus}/>\r\n                                )\r\n                            })\r\n                        }\r\n                    </ tbody>\r\n                </ table>\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n    export default Home\r\n"]},"metadata":{},"sourceType":"module"}